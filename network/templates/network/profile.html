{% extends "network/layout.html" %}
{% load static %}
{% block body %}

{% if user.is_authenticated %}
<h1>{{ profile_user.username }}'s Profile</h1>
{% if user_profile.image %}
<img id="pic" src="{{user_profile.image.url  }}" alt="Profile Image">
{% else %}
<p>No profile image available</p>
<p>{{ user_profile.about }}</p>
{% endif %}
{% if user.is_authenticated and user != profile_user %}
    <form action="{% url 'toggle_follow' profile_user.username %}" method="POST">
        {% csrf_token %}
        {% if is_following %}
            <button type="submit">Unfollow</button>
        {% else %}
            <button type="submit">Follow</button>
        {% endif %}
    </form>
{% endif %}
    <div class="ml-5" style="display: inline-block;">
        <div class="border border-secondary rounded p-2" style="display: inline-block;">Followers: {{ followers_count }}</div>
        <div class="border border-secondary rounded ml-2 p-2" style="display: inline-block;">Following: {{ following_count }}</div>
    </div>
    <div class="p-3">
        <h2>Posts</h2>
        {% for post in posts %} 
            <div class="border border-secondary rounded p-3 mt-2">
                <div>{{ post.content }}</div>
                <div>{{ post.timestamp }}</div>
            </div>
        {% empty %}
            <li>No posts available</li>
        {% endfor %}
    
        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}">next</a>
        {% endif %}
    
        {% if page_obj.has_previous %}
            <a href="?page={{ page_obj.previous_page_number }}">previous</a>
        {% endif %}
    </div>
    
{% else %}
    <h1>No Profile Yet</h1>
{% endif %}

{% endblock %}
